  [1m[35m (35.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (22.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1347200930821886805);[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20170723212512)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "first_name" character varying, "last_name" character varying, "email" character varying, "facebook_id" bigint, "password_digest" character varying, "diving_level" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170723212512"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiveSites (20170723223214)
  [1m[35m (6.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.9ms)[0m  [1m[35mCREATE TABLE "dive_sites" ("id" bigserial primary key, "name" character varying, "image" character varying, "water_type" character varying, "dive_type" character varying, "lat" float, "lng" float, "max_depth" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170723223214"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLogs (20170723231045)
  [1m[35m (6.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (27.3ms)[0m  [1m[35mCREATE TABLE "logs" ("id" bigserial primary key, "date" date, "user_id" bigint, "dive_site_id" bigint, "country" character varying, "dive_time" integer, "gear" character varying, "comments" text, "visibility" character varying, "temperature" float, "water_type" character varying, "dive_type" character varying, "image" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_8fc980bf44"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_39072cde3c"
FOREIGN KEY ("dive_site_id")
  REFERENCES "dive_sites" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_logs_on_user_id" ON "logs"  ("user_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_logs_on_dive_site_id" ON "logs"  ("dive_site_id")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170723231045"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2017-07-24 09:00:43.242254"], ["updated_at", "2017-07-24 09:00:43.242254"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(1347200930821886805)[0m
  [1m[35m (6.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/register" for 127.0.0.1 at 2017-07-24 10:59:25 +0100
  [1m[35m (8.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ArgumentError (Before process_action callback :authenticate_user! has not been defined):
  
app/controllers/authentications_controller.rb:2:in `<class:AuthenticationsController>'
app/controllers/authentications_controller.rb:1:in `<top (required)>'
Started POST "/api/register" for 127.0.0.1 at 2017-07-24 10:59:38 +0100
  
ArgumentError (Before process_action callback :authenticate_user! has not been defined):
  
app/controllers/authentications_controller.rb:2:in `<class:AuthenticationsController>'
app/controllers/authentications_controller.rb:1:in `<top (required)>'
Started POST "/api/register" for 127.0.0.1 at 2017-07-24 11:04:06 +0100
  
ArgumentError (Before process_action callback :authenticate_user! has not been defined):
  
app/controllers/authentications_controller.rb:2:in `<class:AuthenticationsController>'
app/controllers/authentications_controller.rb:1:in `<top (required)>'
Started POST "/api/register" for 127.0.0.1 at 2017-07-24 11:06:52 +0100
Processing by AuthenticationsController#register as */*
  Parameters: {"email"=>"olly@olly.com", "username"=>"ollymid", "first_name"=>"Olly", "last_name"=>"Midd", "diving_level"=>"divemaster", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "authentication"=>{"email"=>"olly@olly.com", "username"=>"ollymid", "first_name"=>"Olly", "last_name"=>"Midd", "diving_level"=>"divemaster", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameters: :diving_level, :authentication
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (12.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["username", "ollymid"], ["first_name", "Olly"], ["last_name", "Midd"], ["email", "olly@olly.com"], ["password_digest", "$2a$10$bpndIwYSOg0uMhrCSoWenuIexLM0LISyVS604GEbCuLC.yORFmkUO"], ["created_at", "2017-07-24 10:07:02.625081"], ["updated_at", "2017-07-24 10:07:02.625081"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mLog Load (18.8ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Attributes (52.58ms)
Completed 500 Internal Server Error in 196ms (ActiveRecord: 46.9ms)


  
ArgumentError (Unknown key: :through. Valid keys are: :class_name, :anonymous_class, :foreign_key, :validate, :autosave, :foreign_type, :dependent, :primary_key, :inverse_of, :required, :polymorphic, :touch, :counter_cache, :optional, :default):
  
app/models/dive_site.rb:2:in `<class:DiveSite>'
app/models/dive_site.rb:1:in `<top (required)>'
app/controllers/authentications_controller.rb:7:in `register'
Started POST "/api/register" for 127.0.0.1 at 2017-07-24 11:09:03 +0100
Processing by AuthenticationsController#register as */*
  Parameters: {"email"=>"olly@olly.com", "username"=>"ollymid", "first_name"=>"Olly", "last_name"=>"Midd", "diving_level"=>"divemaster", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "authentication"=>{"email"=>"olly@olly.com", "username"=>"ollymid", "first_name"=>"Olly", "last_name"=>"Midd", "diving_level"=>"divemaster", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameter: :authentication
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 422 Unprocessable Entity in 108ms (Views: 3.8ms | ActiveRecord: 1.3ms)


Started POST "/api/register" for 127.0.0.1 at 2017-07-24 11:09:13 +0100
Processing by AuthenticationsController#register as */*
  Parameters: {"email"=>"olly@dave.com", "username"=>"ollymid", "first_name"=>"Olly", "last_name"=>"Midd", "diving_level"=>"divemaster", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "authentication"=>{"email"=>"olly@dave.com", "username"=>"ollymid", "first_name"=>"Olly", "last_name"=>"Midd", "diving_level"=>"divemaster", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameter: :authentication
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@dave.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "ollymid"], ["first_name", "Olly"], ["last_name", "Midd"], ["email", "olly@dave.com"], ["password_digest", "$2a$10$FfrF12QfY6q5HemgHH7FOuaD5zv6vVb3fVXxRcEkURScP9oivL1j."], ["diving_level", "divemaster"], ["created_at", "2017-07-24 10:09:13.944105"], ["updated_at", "2017-07-24 10:09:13.944105"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 2]]
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Attributes (12.19ms)
Completed 500 Internal Server Error in 88ms (ActiveRecord: 7.9ms)


  
ArgumentError (Unknown key: :through. Valid keys are: :class_name, :anonymous_class, :foreign_key, :validate, :autosave, :foreign_type, :dependent, :primary_key, :inverse_of, :required, :polymorphic, :touch, :counter_cache, :optional, :default):
  
app/models/dive_site.rb:2:in `<class:DiveSite>'
app/models/dive_site.rb:1:in `<top (required)>'
app/controllers/authentications_controller.rb:7:in `register'
Started POST "/api/register" for 127.0.0.1 at 2017-07-24 11:18:28 +0100
Processing by AuthenticationsController#register as */*
  Parameters: {"email"=>"olly@hotmail.com", "username"=>"ollymid", "first_name"=>"Olly", "last_name"=>"Midd", "diving_level"=>"divemaster", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "authentication"=>{"email"=>"olly@hotmail.com", "username"=>"ollymid", "first_name"=>"Olly", "last_name"=>"Midd", "diving_level"=>"divemaster", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameter: :authentication
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@hotmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "ollymid"], ["first_name", "Olly"], ["last_name", "Midd"], ["email", "olly@hotmail.com"], ["password_digest", "$2a$10$n8zkQCle0yBco3xjq/3g9uNo4jucpbbLSlp0m6VjQC9qmsiy8e8lm"], ["diving_level", "divemaster"], ["created_at", "2017-07-24 10:18:28.946513"], ["updated_at", "2017-07-24 10:18:28.946513"]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mLog Load (0.8ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 3]]
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Attributes (18.95ms)
Completed 200 OK in 117ms (Views: 19.9ms | ActiveRecord: 12.6ms)


Started GET "/api/users" for 127.0.0.1 at 2017-07-24 11:19:11 +0100
Processing by UsersController#index as */*
  Parameters: {"email"=>"olly@hotmail.com", "username"=>"ollymid", "first_name"=>"Olly", "last_name"=>"Midd", "diving_level"=>"divemaster", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "user"=>{"username"=>"ollymid", "first_name"=>"Olly", "last_name"=>"Midd", "email"=>"olly@hotmail.com", "diving_level"=>"divemaster"}}
  [1m[36mUser Load (12.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
[active_model_serializers]   [1m[36mLog Load (1.2ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.8ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 2]]
[active_model_serializers]   [1m[36mLog Load (2.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 3]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (24.37ms)
Completed 200 OK in 43ms (Views: 25.1ms | ActiveRecord: 17.1ms)


Started POST "/api/login" for 127.0.0.1 at 2017-07-24 11:27:52 +0100
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@hotmail.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@hotmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 69ms (ActiveRecord: 0.3ms)


  
NameError (uninitialized constant AuthenticationsController::Auth):
  
app/controllers/authentications_controller.rb:16:in `login'
Started POST "/api/login" for 127.0.0.1 at 2017-07-24 11:28:28 +0100
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@hotmail.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@hotmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 73ms (ActiveRecord: 0.3ms)


  
NameError (uninitialized constant AuthenticationsController::Auth):
  
app/controllers/authentications_controller.rb:16:in `login'
Started POST "/api/login" for 127.0.0.1 at 2017-07-24 11:30:02 +0100
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@hotmail.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@hotmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 87ms (ActiveRecord: 5.2ms)


  
NameError (uninitialized constant AuthenticationsController::Auth):
  
app/controllers/authentications_controller.rb:16:in `login'
Started POST "/api/login" for 127.0.0.1 at 2017-07-24 11:32:02 +0100
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@hotmail.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@hotmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 80ms (ActiveRecord: 0.3ms)


  
NameError (uninitialized constant AuthenticationsController::Auth):
  
app/controllers/authentications_controller.rb:16:in `login'
Started POST "/api/login" for 127.0.0.1 at 2017-07-24 11:34:59 +0100
  
ArgumentError (Before process_action callback :authenticate_user! has not been defined):
  
app/controllers/authentications_controller.rb:2:in `<class:AuthenticationsController>'
app/controllers/authentications_controller.rb:1:in `<top (required)>'
Started POST "/api/login" for 127.0.0.1 at 2017-07-24 11:39:28 +0100
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@hotmail.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@hotmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 98ms (ActiveRecord: 10.9ms)


  
NameError (uninitialized constant AuthenticationsController::Auth):
  
app/controllers/authentications_controller.rb:16:in `login'
Started GET "/api/users" for 127.0.0.1 at 2017-07-24 11:40:06 +0100
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  Parameters: {"email"=>"olly@hotmail.com", "password"=>"[FILTERED]", "user"=>{"email"=>"olly@hotmail.com"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.38ms)
Filter chain halted as :authenticate_user! rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 4.9ms | ActiveRecord: 3.1ms)


Started POST "/api/login" for 127.0.0.1 at 2017-07-24 11:40:24 +0100
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@hotmail.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@hotmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 104ms (ActiveRecord: 13.0ms)


  
NameError (uninitialized constant AuthenticationsController::Auth):
  
app/controllers/authentications_controller.rb:16:in `login'
Started POST "/api/login" for 127.0.0.1 at 2017-07-24 11:42:39 +0100
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@hotmail.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@hotmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 70ms (ActiveRecord: 0.5ms)


  
NameError (uninitialized constant AuthenticationsController::Auth):
  
app/controllers/authentications_controller.rb:16:in `login'
Started POST "/api/login" for 127.0.0.1 at 2017-07-24 11:58:50 +0100
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@hotmail.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@hotmail.com"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.7ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 3]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (35.03ms)
Completed 200 OK in 156ms (Views: 36.4ms | ActiveRecord: 11.4ms)


  [1m[36mDiveSite Load (13.2ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" ORDER BY "dive_sites"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (13.7ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "dive_type", "lat", "lng", "max_depth", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Coral Gardens"], ["water_type", "Salt"], ["dive_type", "Boat"], ["lat", 0.0], ["lng", 0.0], ["max_depth", 20], ["created_at", "2017-07-24 13:15:06.042085"], ["updated_at", "2017-07-24 13:15:06.042085"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDiveSite Load (0.5ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" ORDER BY "dive_sites"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (28.2ms)[0m  [1m[32mINSERT INTO "logs" ("date", "user_id", "dive_site_id", "dive_time", "gear", "comments", "visibility", "temperature", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["date", "2017-07-24"], ["user_id", 1], ["dive_site_id", 1], ["dive_time", 45], ["gear", "Wetsuit, Fins, Mask, Snorkel"], ["comments", "Saw a shark, pissed myself"], ["visibility", "Good"], ["temperature", 27.0], ["created_at", "2017-07-24 13:20:48.119662"], ["updated_at", "2017-07-24 13:20:48.119662"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLog Load (0.7ms)[0m  [1m[34mSELECT  "logs".* FROM "logs" ORDER BY "logs"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.5ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (8.9ms)[0m  [1m[34mSELECT  DISTINCT "dive_sites".* FROM "dive_sites" INNER JOIN "logs" ON "dive_sites"."id" = "logs"."dive_site_id" WHERE "logs"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT  "logs".* FROM "logs" WHERE "logs"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" INNER JOIN "logs" ON "users"."id" = "logs"."user_id" WHERE "logs"."dive_site_id" = $1 LIMIT $2[0m  [["dive_site_id", 1], ["LIMIT", 11]]
  [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT  "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1 LIMIT $2[0m  [["dive_site_id", 1], ["LIMIT", 11]]
  [1m[35m (5.8ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1347200930821886805);[0m
  [1m[35m (7.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveCountryFromLogs (20170724134215)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (30.9ms)[0m  [1m[35mALTER TABLE "logs" DROP "country"[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170724134215"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(1347200930821886805)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1347200930821886805);[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveDiveTypeAndWaterTypeFromLogs (20170724134454)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.3ms)[0m  [1m[35mALTER TABLE "logs" DROP "dive_type"[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "logs" DROP "water_type"[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170724134454"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(1347200930821886805)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1347200930821886805);[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCountryToDiveSites (20170724135601)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (18.1ms)[0m  [1m[35mALTER TABLE "dive_sites" ADD "country" character varying[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170724135601"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(1347200930821886805)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/logs" for 127.0.0.1 at 2017-07-24 15:30:33 +0100
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by LogsController#index as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Filter chain halted as :authenticate_user! rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms)


Started POST "/api/login" for 127.0.0.1 at 2017-07-24 15:30:38 +0100
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@hotmail.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@hotmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 160ms (ActiveRecord: 32.9ms)


  
ArgumentError (wrong number of arguments (given 3, expected 1..2)):
  
app/serializers/user_serializer.rb:3:in `<class:UserSerializer>'
app/serializers/user_serializer.rb:1:in `<top (required)>'
app/controllers/authentications_controller.rb:17:in `login'
Started POST "/api/login" for 127.0.0.1 at 2017-07-24 15:31:16 +0100
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@hotmail.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@hotmail.com"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 3]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (35.2ms)
Completed 200 OK in 141ms (Views: 35.4ms | ActiveRecord: 10.1ms)


Started GET "/api/logs" for 127.0.0.1 at 2017-07-24 15:31:46 +0100
Processing by LogsController#index as */*
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mLog Load (1.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs"[0m
[active_model_serializers]   [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (0.5ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (30.96ms)
Completed 200 OK in 54ms (Views: 40.8ms | ActiveRecord: 9.7ms)


Started GET "/api/logs/1" for 127.0.0.1 at 2017-07-24 15:31:53 +0100
Processing by LogsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT  "logs".* FROM "logs" WHERE "logs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (0.4ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered LogSerializer with ActiveModelSerializers::Adapter::Attributes (6.48ms)
Completed 200 OK in 11ms (Views: 6.0ms | ActiveRecord: 1.5ms)


Started PUT "/api/dive_sites/1" for 127.0.0.1 at 2017-07-24 15:32:37 +0100
Processing by DiveSitesController#update as */*
  Parameters: {"country"=>"England", "id"=>"1", "dive_site"=>{"country"=>"England"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.3ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: :id, :dive_site
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (12.0ms)[0m  [1m[33mUPDATE "dive_sites" SET "country" = $1, "updated_at" = $2 WHERE "dive_sites"."id" = $3[0m  [["country", "England"], ["updated_at", "2017-07-24 14:32:37.317579"], ["id", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mLog Load (1.0ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers] Rendered DiveSiteSerializer with ActiveModelSerializers::Adapter::Attributes (11.41ms)
Completed 200 OK in 37ms (Views: 11.5ms | ActiveRecord: 14.7ms)


Started GET "/api/logs/1" for 127.0.0.1 at 2017-07-24 15:32:49 +0100
Processing by LogsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT  "logs".* FROM "logs" WHERE "logs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (0.4ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered LogSerializer with ActiveModelSerializers::Adapter::Attributes (3.96ms)
Completed 200 OK in 7ms (Views: 3.7ms | ActiveRecord: 1.5ms)


  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (7.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (35.5ms)[0m  [1m[35mTRUNCATE users RESTART IDENTITY CASCADE[0m
  [1m[35m (5.9ms)[0m  [1m[35mTRUNCATE logs RESTART IDENTITY CASCADE[0m
  [1m[35m (9.8ms)[0m  [1m[35mTRUNCATE dive_sites RESTART IDENTITY CASCADE[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "ollymid"], ["first_name", "olly"], ["last_name", "middleton"], ["email", "olly@olly.com"], ["password_digest", "$2a$10$EBqkporrwY5N/04EkQYSOOLQezaA7V2IgYzVAM.V3LqrsxJAy2fZu"], ["diving_level", "PADI OW Instructor"], ["created_at", "2017-07-24 16:22:19.922683"], ["updated_at", "2017-07-24 16:22:19.922683"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (27.6ms)[0m  [1m[35mTRUNCATE users RESTART IDENTITY CASCADE[0m
  [1m[35m (6.2ms)[0m  [1m[35mTRUNCATE logs RESTART IDENTITY CASCADE[0m
  [1m[35m (9.3ms)[0m  [1m[35mTRUNCATE dive_sites RESTART IDENTITY CASCADE[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "ollymid"], ["first_name", "olly"], ["last_name", "middleton"], ["email", "olly@olly.com"], ["password_digest", "$2a$10$xE/8pFlkzomCXPK2CKDYAehNMayW.9Z7./S3kmfgoR2Tan9lmZtQ6"], ["diving_level", "PADI OW Instructor"], ["created_at", "2017-07-24 16:23:05.097767"], ["updated_at", "2017-07-24 16:23:05.097767"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "lucy@lucy.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "lucymid"], ["first_name", "lucy"], ["last_name", "middleton"], ["email", "lucy@lucy.com"], ["password_digest", "$2a$10$FwG74jXmbXXRiqKT2FKiiuesAsARJxONfmJ6lH2jx9iXluuX6ETfC"], ["diving_level", "PADI Open Water Diver"], ["created_at", "2017-07-24 16:23:05.176198"], ["updated_at", "2017-07-24 16:23:05.176198"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "dive_type", "lat", "lng", "max_depth", "created_at", "updated_at", "country") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "Coral Gardens"], ["water_type", "salt"], ["dive_type", "boat, night dive"], ["lat", -16.725453], ["lng", 146.276663], ["max_depth", 20], ["created_at", "2017-07-24 16:23:05.191409"], ["updated_at", "2017-07-24 16:23:05.191409"], ["country", "Australia"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "dive_type", "lat", "lng", "max_depth", "created_at", "updated_at", "country") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "Scapa Flow"], ["water_type", "salt"], ["dive_type", "boat, night dive"], ["lat", 58.903015], ["lng", -3.051202], ["max_depth", 30], ["created_at", "2017-07-24 16:23:05.194371"], ["updated_at", "2017-07-24 16:23:05.194371"], ["country", "Scotland"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (31.0ms)[0m  [1m[35mTRUNCATE users RESTART IDENTITY CASCADE[0m
  [1m[35m (6.8ms)[0m  [1m[35mTRUNCATE logs RESTART IDENTITY CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mTRUNCATE dive_sites RESTART IDENTITY CASCADE[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "ollymid"], ["first_name", "olly"], ["last_name", "middleton"], ["email", "olly@olly.com"], ["password_digest", "$2a$10$.EeEdlXYyzUI6x.QbXGdJeY6EJkP6/l47SEPZdtmbkzoyoSI1MyRi"], ["diving_level", "PADI OW Instructor"], ["created_at", "2017-07-24 16:23:58.243500"], ["updated_at", "2017-07-24 16:23:58.243500"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "lucy@lucy.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "lucymid"], ["first_name", "lucy"], ["last_name", "middleton"], ["email", "lucy@lucy.com"], ["password_digest", "$2a$10$INaklzLyYpwGN.bcaMwyMu52fC0x1k9KU84ELytj0KECQNlitS9EG"], ["diving_level", "PADI Open Water Diver"], ["created_at", "2017-07-24 16:23:58.319291"], ["updated_at", "2017-07-24 16:23:58.319291"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "dive_type", "lat", "lng", "max_depth", "created_at", "updated_at", "country") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "Coral Gardens"], ["water_type", "salt"], ["dive_type", "boat, night dive"], ["lat", -16.725453], ["lng", 146.276663], ["max_depth", 20], ["created_at", "2017-07-24 16:23:58.335702"], ["updated_at", "2017-07-24 16:23:58.335702"], ["country", "Australia"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "dive_type", "lat", "lng", "max_depth", "created_at", "updated_at", "country") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "Scapa Flow"], ["water_type", "salt"], ["dive_type", "boat, night dive"], ["lat", 58.903015], ["lng", -3.051202], ["max_depth", 30], ["created_at", "2017-07-24 16:23:58.338767"], ["updated_at", "2017-07-24 16:23:58.338767"], ["country", "Scotland"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "logs" ("date", "user_id", "dive_site_id", "dive_time", "gear", "comments", "visibility", "temperature", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["date", "2017-04-28"], ["user_id", 1], ["dive_site_id", 1], ["dive_time", 45], ["gear", "mask, snorkel, 6kg weights"], ["comments", "Saw a big fish - Nitrox dive"], ["visibility", "20"], ["temperature", 27.0], ["created_at", "2017-07-24 16:23:58.361568"], ["updated_at", "2017-07-24 16:23:58.361568"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "logs" ("date", "user_id", "dive_site_id", "dive_time", "gear", "comments", "visibility", "temperature", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["date", "2017-04-28"], ["user_id", 2], ["dive_site_id", 2], ["dive_time", 45], ["gear", "mask, snorkel, 6kg weights"], ["comments", "Saw a big fish - Nitrox dive"], ["visibility", "20"], ["temperature", 27.0], ["created_at", "2017-07-24 16:23:58.371711"], ["updated_at", "2017-07-24 16:23:58.371711"]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/logs/1" for 127.0.0.1 at 2017-07-24 17:24:20 +0100
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by LogsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 404 Not Found in 21ms (ActiveRecord: 6.8ms)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=3):
  
app/controllers/application_controller.rb:13:in `current_user'
app/controllers/application_controller.rb:9:in `user_signed_in?'
app/controllers/application_controller.rb:5:in `authenticate_user!'
Started GET "/api/logs/2017-07-24T16:24:31.627Z" for 127.0.0.1 at 2017-07-24 17:24:31 +0100
Processing by LogsController#show as 
  Parameters: {"id"=>"2017-07-24T16:24:31"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 404 Not Found in 15ms (ActiveRecord: 8.1ms)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=3):
  
app/controllers/application_controller.rb:13:in `current_user'
app/controllers/application_controller.rb:9:in `user_signed_in?'
app/controllers/application_controller.rb:5:in `authenticate_user!'
Started POST "/api/login" for 127.0.0.1 at 2017-07-24 17:26:32 +0100
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@olly.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@olly.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (1.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (65.4ms)
Completed 200 OK in 184ms (Views: 60.5ms | ActiveRecord: 11.0ms)


Started POST "/api/login" for 127.0.0.1 at 2017-07-25 11:49:32 +0100
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationsController#login as HTML
  Parameters: {"email"=>"olly@olly.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@olly.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (12.6ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (91.82ms)
Completed 200 OK in 273ms (Views: 79.7ms | ActiveRecord: 70.8ms)


Started GET "/api/diveSites" for 127.0.0.1 at 2017-07-25 11:49:33 +0100
  
ActionController::RoutingError (No route matches [GET] "/api/diveSites"):
  
actionpack (5.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.2) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.0) lib/rack/cors.rb:93:in `call'
railties (5.1.2) lib/rails/engine.rb:522:in `call'
puma (3.9.1) lib/puma/configuration.rb:224:in `call'
puma (3.9.1) lib/puma/server.rb:602:in `handle_request'
puma (3.9.1) lib/puma/server.rb:435:in `process_client'
puma (3.9.1) lib/puma/server.rb:299:in `block in run'
puma (3.9.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 11:54:25 +0100
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (9.3ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (24.1ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (81.93ms)
Completed 200 OK in 181ms (Views: 96.1ms | ActiveRecord: 49.7ms)


Started POST "/api/login" for 127.0.0.1 at 2017-07-25 11:54:43 +0100
Processing by AuthenticationsController#login as HTML
  Parameters: {"email"=>"olly@olly.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@olly.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.6ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (7.36ms)
Completed 200 OK in 95ms (Views: 10.2ms | ActiveRecord: 7.7ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 11:54:43 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (1.5ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.7ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (1.0ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (11.56ms)
Completed 200 OK in 18ms (Views: 11.6ms | ActiveRecord: 3.7ms)


Started POST "/api/login" for 127.0.0.1 at 2017-07-25 11:55:23 +0100
Processing by AuthenticationsController#login as HTML
  Parameters: {"email"=>"olly@olly.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@olly.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.7ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (3.51ms)
Completed 200 OK in 73ms (Views: 3.3ms | ActiveRecord: 1.0ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 11:55:24 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.5ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (6.9ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (18.57ms)
Completed 200 OK in 24ms (Views: 12.9ms | ActiveRecord: 9.5ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 11:55:28 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (3.1ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (2.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (1.2ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (14.6ms)
Completed 200 OK in 22ms (Views: 13.1ms | ActiveRecord: 7.1ms)


Started POST "/api/login" for 127.0.0.1 at 2017-07-25 12:23:10 +0100
  [1m[35m (7.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationsController#login as HTML
  Parameters: {"email"=>"olly@olly.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@olly.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.9ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (64.37ms)
Completed 200 OK in 189ms (Views: 63.7ms | ActiveRecord: 12.6ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 12:23:10 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (1.0ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.6ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (10.29ms)
Completed 200 OK in 54ms (Views: 24.3ms | ActiveRecord: 10.9ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 12:23:33 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.4ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (3.0ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (16.74ms)
Completed 200 OK in 23ms (Views: 14.9ms | ActiveRecord: 5.5ms)


Started POST "/api/login" for 127.0.0.1 at 2017-07-25 12:25:26 +0100
Processing by AuthenticationsController#login as HTML
  Parameters: {"email"=>"ollyolly", "password"=>"[FILTERED]", "authentication"=>{"email"=>"ollyolly", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ollyolly"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 401 Unauthorized in 2ms (Views: 0.5ms | ActiveRecord: 0.3ms)


Started POST "/api/login" for 127.0.0.1 at 2017-07-25 12:25:57 +0100
Processing by AuthenticationsController#login as HTML
  Parameters: {"email"=>"olly@olly.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@olly.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.6ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (3.12ms)
Completed 200 OK in 68ms (Views: 2.9ms | ActiveRecord: 1.0ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 12:25:57 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (3.5ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (8.8ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.8ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (18.5ms)
Completed 200 OK in 27ms (Views: 10.6ms | ActiveRecord: 14.3ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 12:36:53 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.6ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.6ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (17.55ms)
Completed 200 OK in 47ms (Views: 24.5ms | ActiveRecord: 2.7ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 12:50:51 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (37.0ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (13.32ms)
Completed 200 OK in 57ms (Views: 15.6ms | ActiveRecord: 38.7ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 12:51:09 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.8ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.6ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.8ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (17.4ms)
Completed 200 OK in 26ms (Views: 18.6ms | ActiveRecord: 3.0ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 12:51:35 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (19.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (1.2ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.7ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (2.0ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (48.23ms)
Completed 200 OK in 157ms (Views: 66.6ms | ActiveRecord: 23.6ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 12:54:57 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (7.1ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (15.1ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (25.91ms)
Completed 200 OK in 38ms (Views: 12.4ms | ActiveRecord: 23.0ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 12:55:55 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (8.0ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (1.2ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (14.07ms)
Completed 200 OK in 35ms (Views: 15.6ms | ActiveRecord: 10.6ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 12:56:05 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.6ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (11.99ms)
Completed 200 OK in 18ms (Views: 13.3ms | ActiveRecord: 1.8ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 12:56:23 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (10.9ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (3.0ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (2.0ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (19.13ms)
Completed 200 OK in 49ms (Views: 16.8ms | ActiveRecord: 19.0ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 12:56:29 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.6ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (2.2ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (13.87ms)
Completed 200 OK in 26ms (Views: 15.1ms | ActiveRecord: 7.7ms)


Started POST "/api/login" for 127.0.0.1 at 2017-07-25 12:57:09 +0100
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@olly.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@olly.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.6ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (6.74ms)
Completed 200 OK in 79ms (Views: 7.5ms | ActiveRecord: 1.1ms)


Started GET "/logs" for 127.0.0.1 at 2017-07-25 12:58:09 +0100
  
ActionController::RoutingError (No route matches [GET] "/logs"):
  
actionpack (5.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.2) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.0) lib/rack/cors.rb:93:in `call'
railties (5.1.2) lib/rails/engine.rb:522:in `call'
puma (3.9.1) lib/puma/configuration.rb:224:in `call'
puma (3.9.1) lib/puma/server.rb:602:in `handle_request'
puma (3.9.1) lib/puma/server.rb:435:in `process_client'
puma (3.9.1) lib/puma/server.rb:299:in `block in run'
puma (3.9.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/api/logs" for 127.0.0.1 at 2017-07-25 12:58:56 +0100
Processing by LogsController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=3):
  
app/controllers/application_controller.rb:13:in `current_user'
app/controllers/application_controller.rb:9:in `user_signed_in?'
app/controllers/application_controller.rb:5:in `authenticate_user!'
Started POST "/api/login" for 127.0.0.1 at 2017-07-25 13:00:10 +0100
Processing by AuthenticationsController#login as */*
  Parameters: {"email"=>"olly@olly.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@olly.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (3.08ms)
Completed 200 OK in 73ms (Views: 3.4ms | ActiveRecord: 0.7ms)


Started GET "/api/logs" for 127.0.0.1 at 2017-07-25 13:00:25 +0100
Processing by LogsController#index as */*
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLog Load (1.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs"[0m
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (1.1ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (0.3ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.6ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   [1m[36mLog Load (1.0ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (29.47ms)
Completed 200 OK in 38ms (Views: 28.3ms | ActiveRecord: 6.0ms)


Started GET "/api/dive_site" for 127.0.0.1 at 2017-07-25 13:00:35 +0100
  
ActionController::RoutingError (No route matches [GET] "/api/dive_site"):
  
actionpack (5.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.2) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.0) lib/rack/cors.rb:93:in `call'
railties (5.1.2) lib/rails/engine.rb:522:in `call'
puma (3.9.1) lib/puma/configuration.rb:224:in `call'
puma (3.9.1) lib/puma/server.rb:602:in `handle_request'
puma (3.9.1) lib/puma/server.rb:435:in `process_client'
puma (3.9.1) lib/puma/server.rb:299:in `block in run'
puma (3.9.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 13:00:39 +0100
Processing by DiveSitesController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.3ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (6.92ms)
Completed 200 OK in 10ms (Views: 7.3ms | ActiveRecord: 1.3ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 13:03:32 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (2.5ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.6ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (10.35ms)
Completed 200 OK in 17ms (Views: 11.2ms | ActiveRecord: 4.0ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 13:04:27 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.5ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.7ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (9.18ms)
Completed 200 OK in 21ms (Views: 10.1ms | ActiveRecord: 4.8ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 13:04:42 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (1.2ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (8.49ms)
Completed 200 OK in 16ms (Views: 9.8ms | ActiveRecord: 2.3ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 13:17:26 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (4.7ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (5.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (16.64ms)
Completed 200 OK in 27ms (Views: 13.0ms | ActiveRecord: 10.9ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 13:27:15 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (4.1ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (16.06ms)
Completed 200 OK in 50ms (Views: 27.6ms | ActiveRecord: 6.0ms)


Started POST "/api/login" for 127.0.0.1 at 2017-07-25 14:57:44 +0100
Processing by AuthenticationsController#login as HTML
  Parameters: {"email"=>"skbnkf", "password"=>"[FILTERED]", "authentication"=>{"email"=>"skbnkf", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "skbnkf"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.57ms)
Completed 401 Unauthorized in 16ms (Views: 3.4ms | ActiveRecord: 0.9ms)


Started POST "/api/login" for 127.0.0.1 at 2017-07-25 14:58:07 +0100
Processing by AuthenticationsController#login as HTML
  Parameters: {"email"=>"olly@olly.com", "password"=>"[FILTERED]", "authentication"=>{"email"=>"olly@olly.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (14.64ms)
Completed 200 OK in 84ms (Views: 14.7ms | ActiveRecord: 0.8ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 14:58:07 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.8ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (16.88ms)
Completed 200 OK in 34ms (Views: 28.1ms | ActiveRecord: 1.9ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 15:41:45 +0100
Processing by DiveSitesController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.6ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (10.41ms)
Completed 200 OK in 21ms (Views: 13.0ms | ActiveRecord: 2.0ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 15:42:06 +0100
Processing by DiveSitesController#index as HTML
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.22ms)
Filter chain halted as :authenticate_user! rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)


Started GET "/api/users" for 127.0.0.1 at 2017-07-25 20:41:10 +0100
Processing by UsersController#index as */*
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (30.84ms)
Completed 200 OK in 88ms (Views: 41.8ms | ActiveRecord: 8.5ms)


Started GET "/api/logs" for 127.0.0.1 at 2017-07-25 20:41:57 +0100
Processing by LogsController#index as */*
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLog Load (6.2ms)[0m  [1m[34mSELECT "logs".* FROM "logs"[0m
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (11.7ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (0.4ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (36.75ms)
Completed 200 OK in 55ms (Views: 25.4ms | ActiveRecord: 27.2ms)


Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-25 20:43:03 +0100
Processing by DiveSitesController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (5.8ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (10.41ms)
Completed 200 OK in 21ms (Views: 11.3ms | ActiveRecord: 6.6ms)


Started GET "/api/logs" for 127.0.0.1 at 2017-07-25 23:55:33 +0100
Processing by LogsController#index as */*
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLog Load (2.2ms)[0m  [1m[34mSELECT "logs".* FROM "logs"[0m
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (12.4ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (6.0ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (156.24ms)
Completed 200 OK in 269ms (Views: 159.2ms | ActiveRecord: 31.1ms)


  [1m[35m (6.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1347200930821886805);[0m
  [1m[35m (7.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveDiveTypeAndWaterTypeFromDiveSites (20170725234401)
  [1m[35m (12.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (39.2ms)[0m  [1m[35mALTER TABLE "dive_sites" DROP "dive_type"[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170725234401"]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1347200930821886805)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (63.7ms)[0m  [1m[35mTRUNCATE users RESTART IDENTITY CASCADE[0m
  [1m[35m (6.1ms)[0m  [1m[35mTRUNCATE logs RESTART IDENTITY CASCADE[0m
  [1m[35m (36.0ms)[0m  [1m[35mTRUNCATE dive_sites RESTART IDENTITY CASCADE[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "ollymid"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
  [1m[35mSQL (12.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "ollymid"], ["first_name", "olly"], ["last_name", "middleton"], ["email", "olly@olly.com"], ["password_digest", "$2a$10$xjWuyl.vcu4W8zQ4jTYARujOT6L622WMVAxFqq6bas8jT.Vlo.XPS"], ["diving_level", "PADI OW Instructor"], ["created_at", "2017-07-25 23:45:11.406715"], ["updated_at", "2017-07-25 23:45:11.406715"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "lucymid"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "lucy@lucy.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "lucymid"], ["first_name", "lucy"], ["last_name", "middleton"], ["email", "lucy@lucy.com"], ["password_digest", "$2a$10$wLuP76/wSBz3i2DOsGNWPuRG5t6yPCoPsEM77FdTqJR8ONEGVmf.W"], ["diving_level", "PADI Open Water Diver"], ["created_at", "2017-07-25 23:45:11.499198"], ["updated_at", "2017-07-25 23:45:11.499198"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "lat", "lng", "max_depth", "created_at", "updated_at", "country") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Coral Gardens"], ["water_type", "salt"], ["lat", -16.725453], ["lng", 146.276663], ["max_depth", 20], ["created_at", "2017-07-25 23:45:11.515087"], ["updated_at", "2017-07-25 23:45:11.515087"], ["country", "Australia"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "lat", "lng", "max_depth", "created_at", "updated_at", "country") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Scapa Flow"], ["water_type", "salt"], ["lat", 58.903015], ["lng", -3.051202], ["max_depth", 30], ["created_at", "2017-07-25 23:45:11.518588"], ["updated_at", "2017-07-25 23:45:11.518588"], ["country", "Scotland"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (33.7ms)[0m  [1m[32mINSERT INTO "logs" ("date", "user_id", "dive_site_id", "dive_time", "gear", "comments", "visibility", "temperature", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["date", "2017-04-28"], ["user_id", 1], ["dive_site_id", 1], ["dive_time", 45], ["gear", "mask, snorkel, 6kg weights"], ["comments", "Saw a big fish - Nitrox dive"], ["visibility", "20"], ["temperature", 27.0], ["created_at", "2017-07-25 23:45:11.545410"], ["updated_at", "2017-07-25 23:45:11.545410"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "logs" ("date", "user_id", "dive_site_id", "dive_time", "gear", "comments", "visibility", "temperature", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["date", "2017-04-28"], ["user_id", 2], ["dive_site_id", 2], ["dive_time", 45], ["gear", "mask, snorkel, 6kg weights"], ["comments", "Saw a big fish - Nitrox dive"], ["visibility", "20"], ["temperature", 27.0], ["created_at", "2017-07-25 23:45:11.583371"], ["updated_at", "2017-07-25 23:45:11.583371"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/logs" for 127.0.0.1 at 2017-07-26 00:45:26 +0100
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by LogsController#index as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLog Load (1.1ms)[0m  [1m[34mSELECT "logs".* FROM "logs"[0m
[active_model_serializers]   [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (0.5ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (0.6ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (75.66ms)
Completed 500 Internal Server Error in 181ms (ActiveRecord: 17.9ms)


  
NoMethodError (undefined method `dive_type' for #<DiveSite:0x007fb45a761608>):
  
app/controllers/logs_controller.rb:8:in `index'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (207.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "final_project_api_development"[0m
  [1m[35m (210.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "final_project_api_test"[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1347200930821886805);[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20170723212512)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (31.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "first_name" character varying, "last_name" character varying, "email" character varying, "facebook_id" bigint, "password_digest" character varying, "diving_level" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170723212512"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiveSites (20170723223214)
  [1m[35m (6.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.1ms)[0m  [1m[35mCREATE TABLE "dive_sites" ("id" bigserial primary key, "name" character varying, "image" character varying, "water_type" character varying, "dive_type" character varying, "lat" float, "lng" float, "max_depth" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170723223214"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLogs (20170723231045)
  [1m[35m (6.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (29.8ms)[0m  [1m[35mCREATE TABLE "logs" ("id" bigserial primary key, "date" date, "user_id" bigint, "dive_site_id" bigint, "country" character varying, "dive_time" integer, "gear" character varying, "comments" text, "visibility" character varying, "temperature" float, "water_type" character varying, "dive_type" character varying, "image" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_8fc980bf44"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_39072cde3c"
FOREIGN KEY ("dive_site_id")
  REFERENCES "dive_sites" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_logs_on_user_id" ON "logs"  ("user_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_logs_on_dive_site_id" ON "logs"  ("dive_site_id")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170723231045"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveCountryFromLogs (20170724134215)
  [1m[35m (6.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "logs" DROP "country"[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170724134215"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveDiveTypeAndWaterTypeFromLogs (20170724134454)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "logs" DROP "dive_type"[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "logs" DROP "water_type"[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170724134454"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCountryToDiveSites (20170724135601)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.7ms)[0m  [1m[35mALTER TABLE "dive_sites" ADD "country" character varying[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170724135601"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveDiveTypeAndWaterTypeFromDiveSites (20170725234401)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "dive_sites" DROP "dive_type"[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170725234401"]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2017-07-25 23:46:19.316746"], ["updated_at", "2017-07-25 23:46:19.316746"]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1347200930821886805)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (35.0ms)[0m  [1m[35mTRUNCATE users RESTART IDENTITY CASCADE[0m
  [1m[35m (9.4ms)[0m  [1m[35mTRUNCATE logs RESTART IDENTITY CASCADE[0m
  [1m[35m (17.6ms)[0m  [1m[35mTRUNCATE dive_sites RESTART IDENTITY CASCADE[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "ollymid"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "ollymid"], ["first_name", "olly"], ["last_name", "middleton"], ["email", "olly@olly.com"], ["password_digest", "$2a$10$bZL1FkGxn3HnNon1W7eiWeMCR.1PBocu.rAyKGRrFI5/R7OAZs44O"], ["diving_level", "PADI OW Instructor"], ["created_at", "2017-07-25 23:46:19.548713"], ["updated_at", "2017-07-25 23:46:19.548713"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "lucymid"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "lucy@lucy.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "lucymid"], ["first_name", "lucy"], ["last_name", "middleton"], ["email", "lucy@lucy.com"], ["password_digest", "$2a$10$iXCPzqpLr4WhrL9hl6W7VO6o5osj3GDZzH30AsX5enUor.0Oautay"], ["diving_level", "PADI Open Water Diver"], ["created_at", "2017-07-25 23:46:19.622977"], ["updated_at", "2017-07-25 23:46:19.622977"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "lat", "lng", "max_depth", "created_at", "updated_at", "country") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Coral Gardens"], ["water_type", "salt"], ["lat", -16.725453], ["lng", 146.276663], ["max_depth", 20], ["created_at", "2017-07-25 23:46:19.641860"], ["updated_at", "2017-07-25 23:46:19.641860"], ["country", "Australia"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "lat", "lng", "max_depth", "created_at", "updated_at", "country") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Scapa Flow"], ["water_type", "salt"], ["lat", 58.903015], ["lng", -3.051202], ["max_depth", 30], ["created_at", "2017-07-25 23:46:19.644901"], ["updated_at", "2017-07-25 23:46:19.644901"], ["country", "Scotland"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "logs" ("date", "user_id", "dive_site_id", "dive_time", "gear", "comments", "visibility", "temperature", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["date", "2017-04-28"], ["user_id", 1], ["dive_site_id", 1], ["dive_time", 45], ["gear", "mask, snorkel, 6kg weights"], ["comments", "Saw a big fish - Nitrox dive"], ["visibility", "20"], ["temperature", 27.0], ["created_at", "2017-07-25 23:46:19.675227"], ["updated_at", "2017-07-25 23:46:19.675227"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "logs" ("date", "user_id", "dive_site_id", "dive_time", "gear", "comments", "visibility", "temperature", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["date", "2017-04-28"], ["user_id", 2], ["dive_site_id", 2], ["dive_time", 45], ["gear", "mask, snorkel, 6kg weights"], ["comments", "Saw a big fish - Nitrox dive"], ["visibility", "20"], ["temperature", 27.0], ["created_at", "2017-07-25 23:46:19.685066"], ["updated_at", "2017-07-25 23:46:19.685066"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/logs" for 127.0.0.1 at 2017-07-26 00:47:11 +0100
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by LogsController#index as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLog Load (1.0ms)[0m  [1m[34mSELECT "logs".* FROM "logs"[0m
[active_model_serializers]   [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (0.4ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mDiveSite Load (0.4ms)[0m  [1m[34mSELECT  "dive_sites".* FROM "dive_sites" WHERE "dive_sites"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mLog Load (0.3ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (79.65ms)
Completed 500 Internal Server Error in 175ms (ActiveRecord: 22.5ms)


  
NoMethodError (undefined method `dive_type' for #<DiveSite:0x007fc467871490>):
  
app/controllers/logs_controller.rb:8:in `index'
Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-26 00:47:35 +0100
Processing by DiveSitesController#index as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.7ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (15.85ms)
Completed 500 Internal Server Error in 36ms (ActiveRecord: 9.0ms)


  
NoMethodError (undefined method `dive_type' for #<DiveSite:0x007fc468140da0>):
  
app/controllers/dive_sites_controller.rb:8:in `index'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1347200930821886805);[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveDiveTypeAndWaterTypeFromDiveSites (20170725234401)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "dive_sites" ADD "dive_type" character varying[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20170725234401"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(1347200930821886805)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-26 00:53:04 +0100
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

):
  
activerecord (5.1.2) lib/active_record/migration.rb:576:in `check_pending!'
activerecord (5.1.2) lib/active_record/migration.rb:553:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
activesupport (5.1.2) lib/active_support/callbacks.rb:97:in `run_callbacks'
actionpack (5.1.2) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.2) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.0) lib/rack/cors.rb:93:in `call'
railties (5.1.2) lib/rails/engine.rb:522:in `call'
puma (3.9.1) lib/puma/configuration.rb:224:in `call'
puma (3.9.1) lib/puma/server.rb:602:in `handle_request'
puma (3.9.1) lib/puma/server.rb:435:in `process_client'
puma (3.9.1) lib/puma/server.rb:299:in `block in run'
puma (3.9.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1347200930821886805);[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveDiveTypeAndWaterTypeFromDiveSites (20170725234401)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "dive_sites" DROP "dive_type"[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170725234401"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1347200930821886805)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-26 00:54:02 +0100
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DiveSitesController#index as */*
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.7ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (65.3ms)
Completed 500 Internal Server Error in 160ms (ActiveRecord: 19.4ms)


  
NoMethodError (undefined method `dive_type' for #<DiveSite:0x007f9fc5944258>):
  
app/controllers/dive_sites_controller.rb:8:in `index'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (195.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "final_project_api_development"[0m
  [1m[35m (197.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "final_project_api_test"[0m
  [1m[35m (610.1ms)[0m  [1m[35mCREATE DATABASE "final_project_api_development" ENCODING = 'unicode'[0m
  [1m[35m (517.1ms)[0m  [1m[35mCREATE DATABASE "final_project_api_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (1.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "dive_sites" CASCADE[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "dive_sites" ("id" bigserial primary key, "name" character varying, "image" character varying, "water_type" character varying, "lat" float, "lng" float, "max_depth" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "country" character varying)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "logs" CASCADE[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "logs" ("id" bigserial primary key, "date" date, "user_id" bigint, "dive_site_id" bigint, "dive_time" integer, "gear" character varying, "comments" text, "visibility" character varying, "temperature" float, "image" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_logs_on_dive_site_id" ON "logs"  ("dive_site_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_logs_on_user_id" ON "logs"  ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "first_name" character varying, "last_name" character varying, "email" character varying, "facebook_id" bigint, "password_digest" character varying, "diving_level" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (25.7ms)[0m  [1m[35mALTER TABLE "logs" ADD CONSTRAINT "fk_rails_39072cde3c"
FOREIGN KEY ("dive_site_id")
  REFERENCES "dive_sites" ("id")
[0m
  [1m[35m (8.8ms)[0m  [1m[35mALTER TABLE "logs" ADD CONSTRAINT "fk_rails_8fc980bf44"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (15.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170725234401)[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170723212512),
(20170723223214),
(20170723231045),
(20170724134215),
(20170724134454),
(20170724135601);

[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2017-07-25 23:54:50.223070"], ["updated_at", "2017-07-25 23:54:50.223070"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "dive_sites" CASCADE[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "dive_sites" ("id" bigserial primary key, "name" character varying, "image" character varying, "water_type" character varying, "lat" float, "lng" float, "max_depth" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "country" character varying)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "logs" CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "logs" ("id" bigserial primary key, "date" date, "user_id" bigint, "dive_site_id" bigint, "dive_time" integer, "gear" character varying, "comments" text, "visibility" character varying, "temperature" float, "image" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_logs_on_dive_site_id" ON "logs"  ("dive_site_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_logs_on_user_id" ON "logs"  ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "first_name" character varying, "last_name" character varying, "email" character varying, "facebook_id" bigint, "password_digest" character varying, "diving_level" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "logs" ADD CONSTRAINT "fk_rails_39072cde3c"
FOREIGN KEY ("dive_site_id")
  REFERENCES "dive_sites" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "logs" ADD CONSTRAINT "fk_rails_8fc980bf44"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170725234401)[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170723212512),
(20170723223214),
(20170723231045),
(20170724134215),
(20170724134454),
(20170724135601);

[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2017-07-25 23:54:50.332200"], ["updated_at", "2017-07-25 23:54:50.332200"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (27.5ms)[0m  [1m[35mTRUNCATE users RESTART IDENTITY CASCADE[0m
  [1m[35m (3.9ms)[0m  [1m[35mTRUNCATE logs RESTART IDENTITY CASCADE[0m
  [1m[35m (6.4ms)[0m  [1m[35mTRUNCATE dive_sites RESTART IDENTITY CASCADE[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "ollymid"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "ollymid"], ["first_name", "olly"], ["last_name", "middleton"], ["email", "olly@olly.com"], ["password_digest", "$2a$10$.jbC.1u7W21CqrF7Y8v1oOp2sc5eXJR24chHyglqEOLEr2k.MyrI6"], ["diving_level", "PADI OW Instructor"], ["created_at", "2017-07-25 23:54:50.508707"], ["updated_at", "2017-07-25 23:54:50.508707"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "lucymid"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "lucy@lucy.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "lucymid"], ["first_name", "lucy"], ["last_name", "middleton"], ["email", "lucy@lucy.com"], ["password_digest", "$2a$10$pxyadASSP8JN8hh.d8sj7uUEJ57A8hzrbZCzENf76qJpZCPMmmHbi"], ["diving_level", "PADI Open Water Diver"], ["created_at", "2017-07-25 23:54:50.585584"], ["updated_at", "2017-07-25 23:54:50.585584"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "lat", "lng", "max_depth", "created_at", "updated_at", "country") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Coral Gardens"], ["water_type", "salt"], ["lat", -16.725453], ["lng", 146.276663], ["max_depth", 20], ["created_at", "2017-07-25 23:54:50.605343"], ["updated_at", "2017-07-25 23:54:50.605343"], ["country", "Australia"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "lat", "lng", "max_depth", "created_at", "updated_at", "country") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Scapa Flow"], ["water_type", "salt"], ["lat", 58.903015], ["lng", -3.051202], ["max_depth", 30], ["created_at", "2017-07-25 23:54:50.609087"], ["updated_at", "2017-07-25 23:54:50.609087"], ["country", "Scotland"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "logs" ("date", "user_id", "dive_site_id", "dive_time", "gear", "comments", "visibility", "temperature", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["date", "2017-04-28"], ["user_id", 1], ["dive_site_id", 1], ["dive_time", 45], ["gear", "mask, snorkel, 6kg weights"], ["comments", "Saw a big fish - Nitrox dive"], ["visibility", "20"], ["temperature", 27.0], ["created_at", "2017-07-25 23:54:50.639093"], ["updated_at", "2017-07-25 23:54:50.639093"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "logs" ("date", "user_id", "dive_site_id", "dive_time", "gear", "comments", "visibility", "temperature", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["date", "2017-04-28"], ["user_id", 2], ["dive_site_id", 2], ["dive_time", 45], ["gear", "mask, snorkel, 6kg weights"], ["comments", "Saw a big fish - Nitrox dive"], ["visibility", "20"], ["temperature", 27.0], ["created_at", "2017-07-25 23:54:50.650799"], ["updated_at", "2017-07-25 23:54:50.650799"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-26 00:55:19 +0100
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DiveSitesController#index as */*
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.6ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.5ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (65.3ms)
Completed 500 Internal Server Error in 154ms (ActiveRecord: 19.7ms)


  
NoMethodError (undefined method `dive_type' for #<DiveSite:0x007f87431f0c80>):
  
app/controllers/dive_sites_controller.rb:8:in `index'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1347200930821886805);[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveDiveTypeAndWaterTypeFromDiveSites (20170725234401)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "dive_sites" ADD "dive_type" character varying[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20170725234401"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(1347200930821886805)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1347200930821886805);[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCountryToDiveSites (20170724135601)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.2ms)[0m  [1m[35mALTER TABLE "dive_sites" DROP "country"[0m
  [1m[35mSQL (1.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20170724135601"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(1347200930821886805)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-26 00:56:59 +0100
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

):
  
activerecord (5.1.2) lib/active_record/migration.rb:576:in `check_pending!'
activerecord (5.1.2) lib/active_record/migration.rb:553:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
activesupport (5.1.2) lib/active_support/callbacks.rb:97:in `run_callbacks'
actionpack (5.1.2) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.2) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.0) lib/rack/cors.rb:93:in `call'
railties (5.1.2) lib/rails/engine.rb:522:in `call'
puma (3.9.1) lib/puma/configuration.rb:224:in `call'
puma (3.9.1) lib/puma/server.rb:602:in `handle_request'
puma (3.9.1) lib/puma/server.rb:435:in `process_client'
puma (3.9.1) lib/puma/server.rb:299:in `block in run'
puma (3.9.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1347200930821886805);[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCountryToDiveSites (20170724135601)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "dive_sites" ADD "country" character varying[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170724135601"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveDiveTypeAndWaterTypeFromDiveSites (20170725234401)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "dive_sites" DROP "dive_type"[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170725234401"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1347200930821886805)[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1347200930821886805);[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDiveTypeToDiveSites (20170725235942)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.6ms)[0m  [1m[35mALTER TABLE "dive_sites" ADD "dive_type" character varying[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170725235942"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1347200930821886805)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (192.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "final_project_api_development"[0m
  [1m[35m (191.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "final_project_api_test"[0m
  [1m[35m (464.3ms)[0m  [1m[35mCREATE DATABASE "final_project_api_development" ENCODING = 'unicode'[0m
  [1m[35m (383.1ms)[0m  [1m[35mCREATE DATABASE "final_project_api_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "dive_sites" CASCADE[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "dive_sites" ("id" bigserial primary key, "name" character varying, "image" character varying, "water_type" character varying, "lat" float, "lng" float, "max_depth" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "country" character varying, "dive_type" character varying)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "logs" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "logs" ("id" bigserial primary key, "date" date, "user_id" bigint, "dive_site_id" bigint, "dive_time" integer, "gear" character varying, "comments" text, "visibility" character varying, "temperature" float, "image" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_logs_on_dive_site_id" ON "logs"  ("dive_site_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_logs_on_user_id" ON "logs"  ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "first_name" character varying, "last_name" character varying, "email" character varying, "facebook_id" bigint, "password_digest" character varying, "diving_level" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (15.3ms)[0m  [1m[35mALTER TABLE "logs" ADD CONSTRAINT "fk_rails_39072cde3c"
FOREIGN KEY ("dive_site_id")
  REFERENCES "dive_sites" ("id")
[0m
  [1m[35m (9.8ms)[0m  [1m[35mALTER TABLE "logs" ADD CONSTRAINT "fk_rails_8fc980bf44"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170725235942)[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170723212512),
(20170723223214),
(20170723231045),
(20170724134215),
(20170724134454),
(20170724135601),
(20170725234401);

[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2017-07-26 00:01:02.061228"], ["updated_at", "2017-07-26 00:01:02.061228"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "dive_sites" CASCADE[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "dive_sites" ("id" bigserial primary key, "name" character varying, "image" character varying, "water_type" character varying, "lat" float, "lng" float, "max_depth" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "country" character varying, "dive_type" character varying)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "logs" CASCADE[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "logs" ("id" bigserial primary key, "date" date, "user_id" bigint, "dive_site_id" bigint, "dive_time" integer, "gear" character varying, "comments" text, "visibility" character varying, "temperature" float, "image" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_logs_on_dive_site_id" ON "logs"  ("dive_site_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_logs_on_user_id" ON "logs"  ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "first_name" character varying, "last_name" character varying, "email" character varying, "facebook_id" bigint, "password_digest" character varying, "diving_level" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "logs" ADD CONSTRAINT "fk_rails_39072cde3c"
FOREIGN KEY ("dive_site_id")
  REFERENCES "dive_sites" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "logs" ADD CONSTRAINT "fk_rails_8fc980bf44"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170725235942)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170723212512),
(20170723223214),
(20170723231045),
(20170724134215),
(20170724134454),
(20170724135601),
(20170725234401);

[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2017-07-26 00:01:02.158812"], ["updated_at", "2017-07-26 00:01:02.158812"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (26.9ms)[0m  [1m[35mTRUNCATE users RESTART IDENTITY CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mTRUNCATE logs RESTART IDENTITY CASCADE[0m
  [1m[35m (5.7ms)[0m  [1m[35mTRUNCATE dive_sites RESTART IDENTITY CASCADE[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "ollymid"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "olly@olly.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "ollymid"], ["first_name", "olly"], ["last_name", "middleton"], ["email", "olly@olly.com"], ["password_digest", "$2a$10$uOyz.igbQkhakQJdeTgyQ.9gcRIPTJsQzvofzWNnjVKkADwXJzaf2"], ["diving_level", "PADI OW Instructor"], ["created_at", "2017-07-26 00:01:02.327224"], ["updated_at", "2017-07-26 00:01:02.327224"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "lucymid"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "lucy@lucy.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "first_name", "last_name", "email", "password_digest", "diving_level", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "lucymid"], ["first_name", "lucy"], ["last_name", "middleton"], ["email", "lucy@lucy.com"], ["password_digest", "$2a$10$l.uEIHTtHoaZ.deEcrgZ8.TyRiJ/MeOTcwzDQT67gr2iyeSb6NltC"], ["diving_level", "PADI Open Water Diver"], ["created_at", "2017-07-26 00:01:02.401927"], ["updated_at", "2017-07-26 00:01:02.401927"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "lat", "lng", "max_depth", "created_at", "updated_at", "country", "dive_type") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "Coral Gardens"], ["water_type", "salt"], ["lat", -16.725453], ["lng", 146.276663], ["max_depth", 20], ["created_at", "2017-07-26 00:01:02.422875"], ["updated_at", "2017-07-26 00:01:02.422875"], ["country", "Australia"], ["dive_type", "boat, night dive"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "dive_sites" ("name", "water_type", "lat", "lng", "max_depth", "created_at", "updated_at", "country", "dive_type") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "Scapa Flow"], ["water_type", "salt"], ["lat", 58.903015], ["lng", -3.051202], ["max_depth", 30], ["created_at", "2017-07-26 00:01:02.426251"], ["updated_at", "2017-07-26 00:01:02.426251"], ["country", "Scotland"], ["dive_type", "boat, night dive"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "logs" ("date", "user_id", "dive_site_id", "dive_time", "gear", "comments", "visibility", "temperature", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["date", "2017-04-28"], ["user_id", 1], ["dive_site_id", 1], ["dive_time", 45], ["gear", "mask, snorkel, 6kg weights"], ["comments", "Saw a big fish - Nitrox dive"], ["visibility", "20"], ["temperature", 27.0], ["created_at", "2017-07-26 00:01:02.456050"], ["updated_at", "2017-07-26 00:01:02.456050"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "logs" ("date", "user_id", "dive_site_id", "dive_time", "gear", "comments", "visibility", "temperature", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["date", "2017-04-28"], ["user_id", 2], ["dive_site_id", 2], ["dive_time", 45], ["gear", "mask, snorkel, 6kg weights"], ["comments", "Saw a big fish - Nitrox dive"], ["visibility", "20"], ["temperature", 27.0], ["created_at", "2017-07-26 00:01:02.467739"], ["updated_at", "2017-07-26 00:01:02.467739"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/dive_sites" for 127.0.0.1 at 2017-07-26 01:01:15 +0100
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DiveSitesController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiveSite Load (0.7ms)[0m  [1m[34mSELECT "dive_sites".* FROM "dive_sites"[0m
[active_model_serializers]   [1m[36mLog Load (0.6ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 1]]
[active_model_serializers]   [1m[36mLog Load (0.4ms)[0m  [1m[34mSELECT "logs".* FROM "logs" WHERE "logs"."dive_site_id" = $1[0m  [["dive_site_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (60.46ms)
Completed 200 OK in 148ms (Views: 96.8ms | ActiveRecord: 16.4ms)


